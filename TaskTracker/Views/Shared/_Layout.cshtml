<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="robots" content="noindex, nofollow" />
    <title>@ViewRes.SharedStrings.Title@ViewBag.Title</title>

    <!-- JQuery -->
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>

    <!-- JQuery UI -->
    <link href="@Url.Content("~/Content/themes/start/jquery-ui-1.8.11.custom.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"></script>

    <!-- Some quick changes to the style -->
	<style type="text/css">
	body {
		font-size: 9pt;
	}
	</style>

    <!-- StyleTable plugin for JQuery UI -->
    <link href="@Url.Content("~/Content/styleTable.css")" rel="Stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-styleTable.js")" type="text/javascript"></script>

    <!-- Microsoft scripts -->
    <script src="@Url.Content("/Scripts/MicrosoftAjax.js")" type="text/javascript"></script>

    <!-- General scripts -->
    <script type="text/javascript">
    // Resizes the various pieces of the layout when the window gets resized.
    $(window).resize(function () {
        $('#page').css('height', $(window).height() - 18 + 'px');
        $('#content').css('height', ($('#page').height() - $('#header').height() - $('#footer').height() - 24) + 'px');
        $('#header').position({
            my: 'left top',
            at: 'left top',
            of: '#page',
            offset: '1 0'
        });
        $('#footer').position({
            my: 'left bottom',
            at: 'left bottom',
            of: '#page',
            offset: '1 -10'
        });
        $('#messages').position({
            my: 'center top',
            at: 'center top',
            of: '#content',
            offset: '0 5'
        });
    });

    // From http://www.brian-driscoll.com/2010/11/jqueryui-plugin-highlight-and-error.html.
    // Adds functions to JQuery to easily add alert and error styles to an element.
    (function ($) {
        $.fn.addError = function (message) {
            return this.each(function () {
                var $this = $(this);

                var errorHtml = "<div class=\"ui-widget\">";
                errorHtml += "<div class=\"ui-state-error ui-corner-all\" style=\"margin: 0.7em;\">";
                errorHtml += "<p>";
                errorHtml += "<span class=\"ui-icon ui-icon-alert\" style=\"float:left; margin-right: .3em;\"></span>";
                errorHtml += "<span error>" + message + "</span>";
                errorHtml += "</p>";
                errorHtml += "</div>";
                errorHtml += "</div>";

                $this.append(errorHtml);
                $this.removeClass('ui-helper-hidden');
                $(window).resize();
            });
        }
    })(jQuery);

    (function ($) {
        $.fn.addAlert = function (message) {
            return this.each(function () {
                var $this = $(this);

                var alertHtml = "<div class=\"ui-widget\">";
                alertHtml += "<div class=\"ui-state-highlight ui-corner-all\" style=\"margin: 0.7em;\">";
                alertHtml += "<p>";
                alertHtml += "<span class=\"ui-icon ui-icon-info\" style=\"float:left; margin-right: .3em;\"></span>";
                alertHtml += "<span alert>" + message + "</span>";
                alertHtml += "</p>";
                alertHtml += "</div>";
                alertHtml += "</div>";

                $this.append(alertHtml);
                $this.removeClass('ui-helper-hidden');
                $(window).resize();
            });
        }
    })(jQuery);

    // Resize the layout to fit the current window size, and add some special css for text and password inputs.
    $(document).ready(function() {
	    $(window).resize();

		$('input[type="text"], input[type="password"]').addClass('ui-widget-content').focusin(function() {
			$(this).addClass('ui-state-focus');
		}).focusout(function() {
			$(this).removeClass('ui-state-focus');
		});
	});
    </script>
</head>
<body>
	<div id="page" class="ui-widget ui-widget-content ui-corner-all">
		<div id="header" style="text-align: right;">
			<h1 class="ui-widget ui-widget-header ui-corner-top" style="text-align: center; margin-top: 0px; font-size: 18pt;">@ViewRes.SharedStrings.HeaderTitle</h1>
			<div class="ui-widget ui-widget-content" style="border-top: 0px; border-left: 0px; border-right: 0px; padding-bottom: 2px; padding-right: 5px;">
				@Html.Partial("_LogOnPartial")
			</div>
		</div>
		<div id="content" style="padding: 5px; overflow: auto; height: 100%;">
			<div id="messages" style="width: 50%;">
				<div id="errors" class="ui-helper-hidden"></div>
				<div id="alerts" class="ui-helper-hidden"></div>
			</div>
            @RenderBody()
        </div>
        <div id="footer" class="ui-widget ui-widget-content" style="border-bottom: 0px; border-left: 0px; border-right: 0px; padding-top: 2px; text-align: center; height: 25px;">
	        @Html.Raw(ViewRes.SharedStrings.Copyright)
        </div>
    </div>
</body>
</html>